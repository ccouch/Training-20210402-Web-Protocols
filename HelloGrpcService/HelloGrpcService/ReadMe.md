# Introduction to gRPC

## General

### Tasks
- [ ] Clone Repo
- [ ] Watch Video
- [ ] Run existing code
- [ ] Create Mathamatics Service
  - [ ] Create Mathamatics Proto File. This file should have an `Add` RPC with an AddRequest and AddReply message.
  - [ ] Generate the server side `stub`
  - [ ] Implement the `Add` RPC in the Mathamatics service.
  - [ ] In the client app, add a service reference to the Mathamatics Proto file.
  - [ ] Update the client program to call the `Add` method.
  - [ ] Run your code
- [ ] Give this training 5 stars! 
- [ ] Enjoy your weekend!

---

### Protos

Proto files contain the service and message contracts. The service contains RPC functions. These functions can accept messages from the client as well as return messages to the client.

```

// The greeting service definition.
service Greeter {

  // Sends a greeting
  rpc SayHello (HelloRequest) returns (HelloReply);

}

// The request message containing the user's name.
message HelloRequest {
  string name = 1;
}

// The response message containing the greetings.
message HelloReply {
  string message = 1;
}

```

These proto files will generate `stubs` that can be used to write a service or client application. 
On the server it will fill out the default implemenation for the service. 
On the client it exposes functions that can be invoked to trigger code to run on the server.

---

### Configuration

You will want to be sure to add gRPC to your configured services.

```
public void ConfigureServices(IServiceCollection services)
{
...
    services.AddGrpc();
...
}
```

Also, you will want to be sure to map all of your gRPC service endpoints.
```
public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
...
    app.UseEndpoints(endpoints =>
        {
            ...
                endpoints.MapGrpcService<GreeterService>();
            ...
        }
...
}
```

It is recommended that when you create your services that you place them inside the `Services` folder (which will be created for you when using the `ASP.NET gRPC Service` template). This is the standard convention.

ToDo: put notes inside this document.

---

### Auto Generated Code

*When is the code autogenerated? Is this code the `stubs`?**
...
Code is auto-generated for the service. It creates a base class that the service derives itself. In the code snippet below the `Greeter.GreeterBase` is auto-generated code.

```
public class GreeterService : Greeter.GreeterBase
{
...
}
```

Pieces of the auto-generated code handle the serialization and deserialization of messages sent to and from the server.

---

### Definitions

Protos
: Contains the service and message contracts / definitions.

Unity Call
: A single request made from the client to the server followed by a single response from the server to the client.

---

### Miscellaneous / Notes

You wil not see any paths or URLs. gRPC is an opinionated protocol. It puts less burden on the developer by not having them have to worry about the path or url that the client will need to communicate with. All the client needs to know is the location of the gRPC endpoint and everything is built into the protocol.

---

## Links

### Introduction Articles / Documentation
 - **[Introduction to gRPC on .NET](https://docs.microsoft.com/en-us/aspnet/core/grpc/?view=aspnetcore-5.0)**
   - **[gRPC](https://grpc.io/docs/guides/)** is a language agnostic, high-performance Remote Procedure Call (**[RPC](https://docs.microsoft.com/en-us/windows/win32/rpc/rpc-start-page)**) framework.
 - **[Tutorial: Create a gRPC client and server in ASP.NET Core](https://docs.microsoft.com/en-us/aspnet/core/tutorials/grpc/grpc-start?view=aspnetcore-3.1&tabs=visual-studio)**
   - This tutorial shows how to create a .NET Core **[gRPC](https://grpc.io/docs/guides/)** client and an ASP.NET Core gRPC Server.
   - At the end, you'll have a gRPC client that communicates with the gRPC Greeter service.
   - **[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/tutorials/grpc/grpc-start/sample)** (**[how to download](https://docs.microsoft.com/en-us/aspnet/core/introduction-to-aspnet-core?view=aspnetcore-5.0#how-to-download-a-sample)**).
 - **[gRPC services with C#](https://docs.microsoft.com/en-us/aspnet/core/grpc/basics?view=aspnetcore-5.0&viewFallbackFrom=aspnetcore-3.1%2F%3FWT.mc_id%3Dvstoolbox-c9-niner)**
   - This document outlines the concepts needed to write **[gRPC](https://grpc.io/docs/guides/)** apps in C#. The topics covered here apply to both **[C-core](https://grpc.io/blog/grpc-stacks)**-based and ASP.NET Core-based gRPC apps.

### Other Articles / Documentation 
 - **[How to Design Messages for gRPC Services in .NET Core](https://visualstudiomagazine.com/articles/2020/01/06/defining-grpc-messages.aspx)**
   - Defining your gRPC service using the Protocol Buffers specification is pretty easy. There are just a couple of things to be aware of as you convert from the specification to .NET Core and then manage your service's evolution.
 - **[Core concepts, architecture and lifecycle](https://grpc.io/docs/what-is-grpc/core-concepts/)**
   - An introduction to key gRPC concepts, with an overview of gRPC architecture and RPC life cycle.


---

### Videos 

 - **[Introduction to gRPC - Video](https://stackoverflow.com/questions/31890717/adding-a-readme-md-file-to-a-c-sharp-project-in-visual-studio-2015)**
   - In this episode, Robert is joined by Sourabh Shirhatti, who shows how to build a gRPC service with Visual Studio. Sourabh starts with an introduction to gRPC, a language agnostic, high-performance Remote Procedure Call (RPC) framework, and reviews why it was created and what benefits it has over other ways of building services. Sourabh then creates a service from scratch in Visual Studio and then builds an app to call it.
   
---